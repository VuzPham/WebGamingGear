{% load static %}
{% load custom_filters %}

<form method="GET" action="">
  <input type="text" name="q" placeholder="Tìm kiếm sản phẩm..." value="{{ query }}">
  <button type="submit">Tìm kiếm</button>
</form>

<div class="container">
  {% with counter=0 %}
  <div class="row" style="width: 1250px;">
    {% for product in DM_SanPham %}
      {% if product.image != null %}
        {% if counter % 3 == 0 and counter != 0 %}
          </div>
          <div class="row" style="width: 1250px;">
        {% endif %}
        <div class="col-md-4">
          <div class="card" style="border: none; background-color: rgb(250, 250, 250);">
            <img src="{% static 'HinhAnh/' %}{{ product.image }}" class="card-img-top" alt="{{ product.image }}">
            <div class="card-body">
              <h5 class="card-title">{{ product.name }}</h5>
              <p class="card-text">{{ product.price|currency }}</p>
              <p class="card-text">Giảm đến 760.000k khi mua online</p>
              <p class="card-text"><small class="text-muted">Last updated 3 days ago</small></p>
              <div class="product-view-rating">
                <div class="left">
                  <i class="fa fa-star" aria-hidden="true" style="color:#ffc107"></i> 5({{ product.rate }})
                </div>
                <div class="right">
                  <p>{{ product.numbersell }}</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        {% with counter=counter|add:1 %}
        {% endwith %}
      {% endif %}
    {% endfor %}
  </div>
  {% endwith %}
</div>